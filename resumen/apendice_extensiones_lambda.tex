\chapter{Extensiones del lenguaje \texorpdfstring{$\lambda^b$}{lambda b}}



\subsection{Extensión con Registros \texorpdfstring{$\lambda^{...r}$}{lambda ...r+}}

\paragraph{Tipos}
$$\sigma, \tau ~::=~...~|~\{l_i : \sigma_i ~^{i\in 1..n}\}$$

El tipo $\{l_i : \sigma_i^{i\in 1..n}\}$ representan las estructuras con $n$ atributos tipados, por ejemplo: $\{nombre : String,edad:Nat\}$
\paragraph{Términos}
$$ M~::=~ \dots~|~\{l_i = M_i ~^{i\in 1..n}\}~|~M.l $$

Los términos significan:
\begin{itemize}
    \item El registro $\{l_i = M_i ~^{i\in 1..n}\}$ evalua $\{l_i = V_i ~^{i\in 1..n}\}$  donde $V_i$ es el valores al que evalúa $M_i$ para $i\in 1..n$.
    \item $M.l$: Proyecta el valor de la etiqueta $l$ del registro $M$
\end{itemize}

\paragraph{Axiomas y reglas de tipado}
\begin{equation*}
\frac{\judgeType{\Gamma}{M_i}{\sigma_i} \text{ para cada } i \in 1..n}{\judgeType{\Gamma}{\{l_i = M_i ~^{i\in 1..n}\}}{\{l_i : \sigma_i ~^{i\in 1..n}\}}}(\text{T-RCD})
\end{equation*}
\vspace*{5mm}
\begin{equation*}
\frac{\judgeType{\Gamma}{\{l_i = M_i ~^{i\in 1..n}\}}{\{l_i : \sigma_i ~^{i\in 1..n}\}}\hspace*{5mm} j \in 1..n}
{\judgeType{\Gamma}{M.l_j}{\sigma_j}}(\text{T-Proj})
\end{equation*}

\paragraph{Valores}
$$V~::=~\dots~|~\{l_i = V_i ~^{i\in 1..n}\}$$

\paragraph{Axiomas y reglas de evaluación}

\begin{equation*}
\frac{j\in 1..n}{\{l_i = \lambdaValue{V_i} ~^{i\in 1..n}\}.l_j \to \lambdaValue{V_j}}(\text{E-ProjRcd})
\end{equation*}
\vspace*{5mm}
\begin{equation*}
\frac{M \to M'}{M.l \to M'.l}(\text{E-Proj})
\end{equation*}

\vspace*{5mm}
\begin{equation*}
\frac{M_j\to M_j'}{\{l_i = \lambdaValue{V_i}~^{i\in 1..j-1}, l_j = M_j, l_i = M_i ~^{i\in j+1..n}\} \to \{l_i = \lambdaValue{V_i}~^{i\in 1..j-1}, l_j = M'_j, l_i = M_i ~^{i\in j+1..n}\}}(\text{E-RCD})
\end{equation*}
\vspace*{5mm}
\subsection{Extensión con Declaraciones Locales (\texorpdfstring{$\lambda^{...let}$}{lambda ...let})}\label{extension_lambda:let}

Con esta extensión, agregamos al lenguaje el término $\lambdaLet{x}{\sigma}{M}{N}$, que evalúa $M$ a un valor, liga $x$ a $V$ y, luego, evalúa $N$. Este término solo mejora la legibilidad de los programas que ya podemos definir con el lenguaje hasta ahora definido.

\paragraph{Términos}
$$ M~::=~ \dots~|~\lambdaLet{x}{\sigma}{M}{N} $$


\paragraph{Axiomas y reglas de tipado}
\begin{equation*}
\frac{\judgeType{\Gamma}{M}{\sigma_1}\hspace*{5mm}\judgeType{\Gamma,x:\sigma_1}{N}{\sigma_2}}{\judgeType{\Gamma}{\lambdaLet{x}{\sigma_1}{M}{N}}{\sigma_2}}(\text{T-Let})
\end{equation*}

\paragraph{Axiomas y reglas de evaluación}

\begin{equation*}
\frac{M_1\to M_1'}{\lambdaLet{x}{\sigma}{M_1}{M_2}\to \lambdaLet{x}{\sigma}{M'_1}{M_2}}(\text{E-Let})
\end{equation*}
\vspace*{5mm}
\begin{equation*}
\frac{}{\lambdaLet{x}{\sigma}{\lambdaValue{V_1}}{M_2}\to \replaceBy{M_2}{x}{\lambdaValue{V_1}}}(\text{E-LetV})
\end{equation*}

\subsubsection{Construcción \textit{let} recursivo (Letrec)}
Una construcción alternativa para definir funciones recursivas es 
$$letrec~f:\sigma\to\sigma = \lambdaAbs{x}{\sigma}{M~in~N}$$

Y $letRec$ se puede definir  en base a $let$ y $fix$ (definido en \ref{lambda_calculo:recursion}) de la siguiente forma:

$$\lambdaLet{f}{\sigma\to\sigma}{(\lambdaFix{\lambdaAbs{f}{\sigma\to\sigma}{\lambdaAbs{x}{\sigma}{M}}})}{N}$$

\subsection{Extensión con tuplas}

\paragraph{Tipos}
$$\sigma,\tau~::= \dots~|~\sigma\times\tau$$

\paragraph{Términos}
$$M,~N~::=~\dots~|~<M,N>~|~\pi_1(M)~|~\pi_2(M)$$
\paragraph{Axiomas y reglas de tipado}
\begin{equation*}
    \frac{\judgeType{\Gamma}{M}{\sigma}\hspace*{5mm}\judgeType{\Gamma}{N}{\tau}}{\judgeType{\Gamma}{<M,N>}{\sigma\times\tau}}(\text{T-Tupla})
\end{equation*}
\vspace*{5mm}
\begin{equation*}
\frac{\judgeType{\Gamma}{M}{\sigma\times\tau}}{\judgeType{\Gamma}{\pi_1(M)}{\sigma}}(\text{T-}\pi_1)\hspace*{1cm}\frac{\judgeType{\Gamma}{M}{\sigma\times\tau}}{\judgeType{\Gamma}{\pi_2(M)}{\tau}}(\text{T-}\pi_2)
\end{equation*}

\paragraph{Axiomas y reglas de evaluación}
\begin{equation*}
\frac{M\to M'}{<M,N>\to<M',N>}(\text{E-Tuplas})\hspace*{1cm}\frac{N\to N'}{<\lambdaValue{V},N>\to<\lambdaValue{V},N'>}(\text{E-Tuplas1})
\end{equation*}
\vspace*{5mm}
\begin{equation*}
\frac{M\to M'}{\pi_1(M)\to\pi_1(M')}(\text{E-}\pi_1)\hspace*{1cm}\frac{}{\pi_1(<\lambdaValue{V_1}, \lambdaValue{V_2}>)\to\lambdaValue{V_1}}(\text{E-}\pi'_1)
\end{equation*}
\vspace*{5mm}
\begin{equation*}
\frac{M\to M'}{\pi_2(M)\to\pi_2(M')}(\text{E-}\pi_2)\hspace*{1cm}\frac{}{\pi_2(<\lambdaValue{V_1}, \lambdaValue{V_2}>)\to\lambdaValue{V_2}}(\text{E-}\pi'_2)
\end{equation*}
